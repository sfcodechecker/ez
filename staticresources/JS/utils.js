function GetCardType(e){var r=[];r[0]={name:"Visa",prefixes:"4"},r[1]={name:"MasterCard",prefixes:"50,51,52,53,54,55"},r[2]={name:"DinersClub",prefixes:"36,38"},r[3]={name:"CarteBlanche",prefixes:"300,301,302,303,304,305"},r[4]={name:"AmEx",prefixes:"34,37"},r[5]={name:"Discover",prefixes:"30,36,38,39,6011,622,62,64,65,68"},r[6]={name:"JCB",prefixes:"35"},r[7]={name:"enRoute",prefixes:"2014,2149"},r[8]={name:"Solo",prefixes:"6334,6767"},r[9]={name:"Switch",prefixes:"4903,4905,4911,4936,564182,633110,6333,6759"},r[10]={name:"Maestro",prefixes:"5018,5020,5038,6304,6759,6761,6762,6763"},r[11]={name:"VisaElectron",prefixes:"4026,417500,4508,4844,4913,4917"},r[12]={name:"LaserCard",prefixes:"6304,6706,6771,6709"};for(var n="Invalid",a=0;a<r.length;a++){var t=[],o=0;t=r[a].prefixes.split(",");for(var i=0;i<t.length;i++){var s=new RegExp("^"+t[i]);s.test(e)&&t[i].length>o&&(n=r[a].name,o=t[i].length)}}return n}function toNumber(e){return+e}function convertFormToJSONString(e){var r=jQuery(e).serializeArray(),n={};return jQuery.each(r,function(){$("[name="+this.name+"]").is(":checkbox")?n[this.name]=$("[name="+this.name+"]").is(":checked"):"string"==typeof this.value?n[this.name]=$.trim(this.value):n[this.name]=this.value||""}),JSON.stringify(n)}function submitForm(e,r){var n=convertFormToJSONString(e),a=$(e).prop("action"),t=$(e).prop("method"),o={type:t,url:a,data:n,dataType:"json",contentType:"application/json; charset=utf-8",cache:!1};return $.extend(r,o),$.ajax(r)}function ajaxRequestSync(e,r,n){var a=null;return"undefined"==typeof failureFunction&&(failureFunction=handleCaughtAjaxException),$.ajax({type:e,url:r,data:n,dataType:"json",cache:!1,contentType:"application/json; charset=utf-8",async:!1,success:function(e){a=e},error:function(a,t,o){handleAjaxError(a,t,o,e,r,n)}}),a}function ajaxRequest(e,r,n,a,t){return"undefined"==typeof t&&(t=handleCaughtAjaxException),$.ajax({type:e,url:r,data:n,dataType:"json",cache:!1,contentType:"application/json; charset=utf-8",success:function(e){null!=e&&0==getReturnObj(e).returnCode?a(e):t(e)},error:function(a,t,o){handleAjaxError(a,t,o,e,r,n)}})}function handleAjaxError(e,r,n,a,t){0!=e.status&&handleServerError(e.status,n,t,e.getResponseHeader("Date"))}function handleCaughtAjaxException(e){var r=e.errorMessages;null==r?displayAjaxExceptionDialog(e):displayAjaxExceptionValidationErrorDialog(r)}function displayAjaxExceptionDialog(e){var r=getReturnObj(e),n=($("<div></div>"),r.returnMessage.replace(/</g,"").replace(/>/g,""));showErrorModal("Error",n)}function displayAjaxExceptionValidationErrorDialog(e){var r=$("<ul></ul>");$.each(e,function(e,n){var a=$('<li class="error"></li>').html(n);r.append(a)});var n="<div><b>Validation errors</b>:</div>";$(n).append(r),showErrorModal("Validation errors",n)}function getReturnObj(e){var r={returnCode:0,returnMessage:""};return e.returnCode&&(r.returnCode=e.returnCode,r.returnMessage=e.returnMessage),e["return"]&&(r.returnCode=e["return"].returnCode,r.returnMessage=e["return"].returnMessage),r}function showErrorModal(e,r){var n=$("#errorDialog").clone();n.find(".modal-title").html(e),n.find(".modal-body").html(r),n.modal("show")}function handleServerError(e,r,n,a){var t="\n\n\n\nTechnical Error Details\nCode: "+e+"\nMessage: "+r+"\nDate: "+a+"\nRequest: "+n+"\nUser Agent: "+navigator.userAgent;t=encodeURIComponent(t),$("#serverError-errorDescription").text("An error has occurred (Error code: "+e+" - "+r+")."),$("#serverError-errorMessage").html("If this problem persists, email us at <a>support@ezidebit.com.au</a>."),$("#serverError-errorMessage > a").click(function(){window.open("mailto:support@ezidebit.com.au?subject="+encodeURIComponent("Ezidebit Payment Application Error")+"&body="+t)}),$("#serverError").slideDown("fast")}